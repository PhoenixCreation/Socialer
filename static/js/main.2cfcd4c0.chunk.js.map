{"version":3,"sources":["firebase.js","Post.js","ImageUpload.js","UserPopUp.js","App.js","serviceWorker.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","Post","postId","crntuser","username","userAvatar","caption","imageURL","comments","useState","commentText","setCommentText","liked","setLiked","likeCount","setLikeCount","useEffect","collection","doc","get","then","data","likes","length","includes","displayName","toggleLike","e","preventDefault","update","FieldValue","arrayRemove","arrayUnion","className","Avatar","src","alt","IconButton","onClick","color","map","comment","commenttext","Input","type","placeholder","value","onChange","target","Button","alert","ImageUpload","setCaption","image","setImage","progress","setProgress","name","event","max","files","ref","put","on","snapshot","pgrs","Math","round","bytesTransferred","totalBytes","console","log","error","child","getDownloadURL","url","add","timestamp","serverTimestamp","postinfo","id","UserPopUp","getModalStyle","top","left","transform","useStyles","makeStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","posts","setPosts","open","setOpen","openSignIn","setOpenSignIn","openPost","setOpenPost","openUser","setOpenUser","setUsername","password","setPassword","email","setEmail","userImage","setUserImage","user","setUser","avatarURL","setAvatarURL","React","modalStyle","unsubscribe","onAuthStateChanged","authUser","photoURL","updateProfile","onSnapshot","docs","post","endIcon","Modal","onClose","style","createUserWithEmailAndPassword","message","followers","following","catch","signInWithEmailAndPassword","signOut","key","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2cfcd4c0.chunk.js","sourcesContent":["// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\n\r\nimport firebase from 'firebase';\r\n\r\nconst firebaseApp = firebase.initializeApp({\r\n  apiKey: \"AIzaSyA79AKi494FNiNFUNjCBqqOneDthQMhpUE\",\r\n  authDomain: \"socialer-ab176.firebaseapp.com\",\r\n  databaseURL: \"https://socialer-ab176.firebaseio.com\",\r\n  projectId: \"socialer-ab176\",\r\n  storageBucket: \"socialer-ab176.appspot.com\",\r\n  messagingSenderId: \"62578825669\",\r\n  appId: \"1:62578825669:web:e65a6d0979b8c3f07093ac\",\r\n  measurementId: \"G-R00TB46SH7\"\r\n})\r\n\r\nconst db = firebaseApp.firestore()\r\nconst auth = firebase.auth()\r\nconst storage = firebase.storage()\r\n\r\nexport { db, auth, storage }\r\n","import React, { useState, useEffect } from 'react';\r\nimport firebase from 'firebase'\r\n\r\nimport './Post.css'\r\nimport Avatar from '@material-ui/core/avatar'\r\nimport {Button, Input, IconButton} from '@material-ui/core';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport { db } from './firebase'\r\n\r\n\r\nfunction Post({postId, crntuser, username, userAvatar, caption, imageURL, comments}) {\r\n  const [commentText,setCommentText] = useState('')\r\n  const [liked,setLiked] = useState(false)\r\n  const [likeCount,setLikeCount] = useState(0)\r\n\r\n  useEffect(() => {\r\n    db.collection('posts').doc(postId).get().then((doc) => {\r\n      var data = doc.data().likes\r\n      setLikeCount(data.length)\r\n      if(crntuser){\r\n\r\n      if(data.includes(crntuser.displayName)){\r\n        setLiked(true)\r\n      }\r\n    }\r\n    })\r\n  },[])\r\n\r\n  const toggleLike = (e) => {\r\n    e.preventDefault()\r\n    db.collection('posts').doc(postId).get().then((doc) => {\r\n      var data = doc.data().likes\r\n      if(data.includes(crntuser.displayName)){\r\n        setLiked(false)\r\n        db.collection('posts').doc(postId).update({\r\n          likes: firebase.firestore.FieldValue.arrayRemove(crntuser.displayName)\r\n        })\r\n        setLikeCount(data.length - 1)\r\n      }\r\n      else{\r\n        setLiked(true)\r\n        db.collection('posts').doc(postId).update({\r\n          likes: firebase.firestore.FieldValue.arrayUnion(crntuser.displayName)\r\n        })\r\n        setLikeCount(data.length + 1)\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n  const addComment = (e) =>{\r\n    e.preventDefault()\r\n    if(commentText !== ''){\r\n    db.collection('posts').doc(postId).update({\r\n      comments: firebase.firestore.FieldValue.arrayUnion({\r\n        username: crntuser.displayName,\r\n        commenttext: commentText\r\n      })\r\n    })\r\n    }\r\n    else{\r\n      alert(\"bhai kaik lakh pachi comment kar\")\r\n    }\r\n    setCommentText('')\r\n  }\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"post__header\">\r\n        <Avatar src={userAvatar} alt={username} className=\"post__headerAvatar\" />\r\n        <h3>{username}</h3>\r\n      </div>\r\n      <img className=\"post__image\" src={imageURL} alt=\"Image not found\" />\r\n      <div className=\"post__likesection\">\r\n      {crntuser?.displayName && liked ? (\r\n        <IconButton onClick={toggleLike}>\r\n          <FavoriteIcon color=\"secondary\"/>\r\n        </IconButton>\r\n      ) : crntuser?.displayName && !liked ? (\r\n        <IconButton onClick={toggleLike}>\r\n          <FavoriteBorderIcon color=\"secondary\"/>\r\n        </IconButton>      ) : (\r\n        <p></p>\r\n      )\r\n      }\r\n      <div className=\"post__likestotal\">{likeCount}</div>\r\n      </div>\r\n      <div className=\"post__footer\"><strong>{username}:</strong>{caption}</div>\r\n\r\n      <div className=\"post__commentbox\">\r\n        {\r\n          comments.map(comment => (\r\n          <div className=\"post__comment\"><strong>{comment.username}</strong> : {comment.commenttext}</div>\r\n          ))\r\n        }\r\n        { crntuser?.displayName ? (\r\n          <form className=\"post__commentadder\">\r\n          <Input\r\n          type=\"text\"\r\n          placeholder=\"share your thoughs...\"\r\n          value={commentText}\r\n          onChange={(e) => setCommentText(e.target.value)}\r\n          />\r\n          <Button type=\"submit\" onClick={addComment}>Comment</Button>\r\n          </form>\r\n        ) : (\r\n          <p>Login to comment</p>\r\n        )\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Post\r\n","import React, { useState, useEffect } from 'react';\r\nimport firebase from 'firebase'\r\n//import './ImageUpload.css'\r\nimport {Button, Input} from '@material-ui/core';\r\nimport { storage, db } from './firebase'\r\n\r\n\r\nfunction ImageUpload({username, userAvatar}) {\r\n  const [caption,setCaption] = useState('')\r\n  const [image,setImage] = useState(null)\r\n  const [progress,setProgress] = useState(0)\r\n\r\n  const handleChange = (e) => {\r\n    if(e.target.files[0]){\r\n      setImage(e.target.files[0])\r\n    }\r\n  }\r\n\r\n  const handleUpload = () =>{\r\n    const uploadTask = storage.ref(`Images/${image.name}`).put(image)\r\n    uploadTask.on(\"state_changed\",(snapshot) => {\r\n      const pgrs = Math.round(\r\n        (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n      )\r\n      setProgress(pgrs)\r\n      console.log(snapshot.bytesTransferred / snapshot.totalBytes )\r\n    },(error) => {\r\n      console.log(error);\r\n    },\r\n    () =>{\r\n      storage\r\n        .ref('Images')\r\n        .child(image.name)\r\n        .getDownloadURL()\r\n        .then((url) => {\r\n          db.collection('posts').add({\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            caption: caption,\r\n            imageURL: url,\r\n            username: username,\r\n            userAvatar: userAvatar,\r\n            comments: [],\r\n            likes: []\r\n          }).then((postinfo) => {\r\n\r\n            console.log(postinfo.id);\r\n\r\n          })\r\n\r\n          alert(\"Posted...\")\r\n          setProgress(0)\r\n          setCaption(\"\")\r\n          setImage(null)\r\n        })\r\n    }\r\n  )\r\n  }\r\n\r\n  return (\r\n    <div className=\"ImageUpload\">\r\n      <Input type=\"text\" name=\"caption\" onChange={event => setCaption(event.target.value)} value={caption} placeholder=\"Enter your caption\" />\r\n      <progress value={progress} max=\"100\" />\r\n      <Input type=\"file\" name=\"image\" onChange={handleChange} />\r\n      <Button onClick={handleUpload}>\r\n        Upload\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImageUpload\r\n","import React from 'react'\r\nimport './UserPopUp'\r\n\r\nfunction UserPopUp() {\r\n  return (\r\n    <div className=\"UserPopUp\">\r\n      User Profiles\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserPopUp\r\n","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Avatar from '@material-ui/core/avatar'\nimport Post from './Post'\nimport ImageUpload from './ImageUpload'\nimport UserPopUp from './UserPopUp'\nimport { db, auth, storage } from './firebase'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport {Button, Input} from '@material-ui/core';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #aa4488',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n  const [posts,setPosts] = useState([]);\n  const [open,setOpen] = useState(false)\n  const [openSignIn,setOpenSignIn] = useState(false)\n  const [openPost,setOpenPost] = useState(false)\n  const [openUser,setOpenUser] = useState(false)\n  const [username,setUsername] = useState('')\n  const [password,setPassword] = useState('')\n  const [email,setEmail] = useState('')\n  const [userImage,setUserImage] = useState(null)\n  const [user,setUser] = useState(null)\n  const [avatarURL,setAvatarURL] = useState(null)\n\n  const [modalStyle] = React.useState(getModalStyle);\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((authUser) => {\n      if(authUser){\n        //USer has logged in\n        //console.log(authUser)\n        setUser(authUser)\n        if(authUser.photoURL != null){\n          setAvatarURL(authUser.photoURL)\n        }\n        if(authUser.displayName){\n\n        }else{\n          return authUser.updateProfile({\n            displayName: username\n          })\n        }\n      }\n      else{\n        //logged out\n        setUser(null)\n      }\n\n    })\n\n    return () => {\n      unsubscribe()\n    }\n  },[user,username])\n\n  useEffect(() =>{\n    db.collection('posts').onSnapshot(snapshot => {\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        post: doc.data()\n      })))\n    })\n  },[])\n\n  const handleChange = (e) => {\n    if(e.target.files[0]){\n      setUserImage(e.target.files[0])\n    }\n  }\n\n  const signUp = (event) => {\n    event.preventDefault()\n\n    auth.createUserWithEmailAndPassword(email,password)\n    .then((authUser) => {\n      authUser.user.updateProfile({\n        displayName: username\n      })\n      const uploadTask = storage.ref(`ProfileImages/${username}`).put(userImage)\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          console.log(snapshot.bytesTransferred / snapshot.totalBytes )\n        },\n        (error) => {alert(error.message)},\n        () => {\n          storage\n            .ref('ProfileImages')\n            .child(username)\n            .getDownloadURL()\n            .then((url => {\n              setAvatarURL(url)\n              authUser.user.updateProfile({\n                photoURL: url\n              })\n\n          db.collection('userinfo').add({\n            email: email,\n            username: username,\n            photoURL: url,\n            followers: [],\n            following: [],\n            posts: []\n          })\n\n          alert(\"user created successfully\")\n            }))\n        }\n      )\n\n    })\n    .catch((error) => alert(error.message))\n\n    setOpen(false)\n  }\n\n  const signIn = (event) => {\n    event.preventDefault()\n\n    auth.signInWithEmailAndPassword(email,password)\n    .then((authUser) => {\n      setUser(authUser)\n      setAvatarURL(authUser.user.photoURL)\n      console.log(authUser)\n    })\n    .catch((error) => alert(error.message))\n\n    setOpenSignIn(false)\n  }\n\n  return (\n    <div className=\"app\">\n      {user?.displayName ? (\n        <div className=\"app__postButton\">\n          <Button type=\"button\" name=\"button\" onClick={() => setOpenPost(true)} endIcon={<CloudUploadIcon />}>  Add</Button>\n        </div>\n        ) : (\n          <h3>Log in or SignUp to start adding your movements too..</h3>\n        )}\n      <Modal\n        open={openPost}\n        onClose={() => setOpenPost(false)}\n      >\n      <div style={modalStyle} className={classes.paper}>\n        { user?.displayName ? (\n          <ImageUpload username={user.displayName} userAvatar={avatarURL}/>\n\n          ) : (\n          <h3>You need to login... How am I supposed to allow you to post without login..</h3>\n\n          )}\n      </div>\n      </Modal>\n      <Modal //Sgn UP model\n        open={open}\n        onClose={() => setOpen(false)}\n      >\n      <div style={modalStyle} className={classes.paper}>\n        <div id=\"simple-modal-description\">\n          <center>\n            <img className=\"app__headerImage\" src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\" alt=\"logo\" />\n          </center>\n          <form className=\"app_signUp\">\n            <Input\n              type=\"text\"\n              placeholder=\"username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <Input\n              type=\"email\"\n              placeholder=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input\n              type=\"password\"\n              placeholder=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <Input type=\"file\" name=\"image\" onChange={handleChange} />\n\n            <Button  type=\"submit\" onClick={signUp}>SIgn Up</Button>\n          </form>\n        </div>\n\n      </div>\n      </Modal>\n\n      <Modal //Sign in model\n        open={openSignIn}\n        onClose={() => setOpenSignIn(false)}\n      >\n      <div style={modalStyle} className={classes.paper}>\n        <div id=\"simple-modal-description\">\n          <center>\n            <img className=\"app__headerImage\" src=\"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png\" alt=\"logo\" />\n          </center>\n          <form className=\"app_signUp\">\n\n            <Input\n              type=\"email\"\n              placeholder=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <Input\n              type=\"password\"\n              placeholder=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <Button  type=\"submit\" onClick={signIn}>SIgn In</Button>\n          </form>\n        </div>\n\n      </div>\n      </Modal>\n      <Modal\n        open={openUser}\n        onClose={() => setOpenUser(false)}\n      >\n      <div style={modalStyle} className={classes.paper}>\n      <UserPopUp />\n      </div>\n      </Modal>\n\n      {/* main app */}\n      <div className=\"app__header\">\n        <div className=\"app__headerImage\">\n          Socialer\n        </div>\n        <div className=\"app__headerLogin\">\n        {user ? (\n          <div className=\"app__headerRight\">\n          <Avatar src={avatarURL} alt={username} onClick={() => setOpenUser(true)}/>\n          <Button onClick={() => auth.signOut()} id=\"signup-btn\">Log Out</Button>\n          </div>\n        ): (\n        <div>\n          <Button onClick={() => setOpenSignIn(true)} >Sign In</Button>\n          <Button onClick={() => setOpen(true)} >SignUp</Button>\n        </div>\n        )}\n        </div>\n      </div>\n      {\n        posts.map(({id,post}) => (\n          <Post key={id} postId={id} crntuser={user} username={post.username} userAvatar={post.userAvatar} caption={post.caption} imageURL={post.imageURL} comments={post.comments}/>\n        ))\n      }\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}